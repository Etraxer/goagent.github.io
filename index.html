<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <script>
        if (location.href.indexOf("http://") == 0) {
            location = location.href.replace("http:", "https:", 1);
        }
    </script>
    <title>GoAgent Â·</title>
    <script src="marked.js"></script>
    <link rel="stylesheet" href="github-markdown.css">
  </head>
  <body style="min-width:200px; max-width:900px; margin:auto; padding:16px;">
    <div id="content" class="markdown-body"></div>
    <script>
    (function() {
        if (location.href.indexOf('https:') < 0) {
            return;
        }
        if (window.XMLHttpRequest) {
            var request = new XMLHttpRequest();
        } else {
            var request = new ActiveXObject("Microsoft.XMLHTTP");
        }
        request.onreadystatechange = render;
        var path = "https://api.github.com/repos/goagent/goagent/readme";
        if (location.href.indexOf('?') > 0) {
            path = location.href.substring(location.href.indexOf('?')+1);
        }
        request.open('GET', path, true);
        request.send();
        function render() {
            if (request.readyState == 4) {
                if (request.status >= 200 && request.status < 400){
                    var text = request.responseText;
                    if (path.indexOf('://api.github.com/') >= 0) {
                      if (JSON) {
                        text = JSON.parse(text)['content'];
                      } else {
                        text = eval('(' + text + ')')['content'];
                      }
                      alert(text);
                      if (atob) {
                        text = atob(text); 
                      } else {
                        decodeBase64 = function(s) {
    var e={},i,b=0,c,x,l=0,a,r='',w=String.fromCharCode,L=s.length;
    var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    for(i=0;i<64;i++){e[A.charAt(i)]=i;}
    for(x=0;x<L;x++){
        c=e[s.charAt(x)];b=(b<<6)+c;l+=6;
        while(l>=8){((a=(b>>>(l-=8))&0xff)||(x<(L-2)))&&(r+=w(a));}
    }
    return r;
};
                        text = decodeBase64(text);
                      }
                    }
                    var firstline = text.split("\n")[0];
                    if (firstline.indexOf('#') == 0) {
                      document.title += ' ' + firstline.replace(/#*/, '').replace(/\s+/, '');
                    } else {
                      document.title += ' A GAE Proxy';
                    }
                    document.getElementById("content").innerHTML = marked(text);
                } else {
                    location = 'https://github.com/goagent/goagent';
                }
            }
        }
    })();
    </script>
  </body>
</html>
